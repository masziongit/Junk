{"version":3,"sources":["../src/rename.js"],"names":["sworm","require","config","db","sql","params","console","log","alterTable","query","then","catch","err","createTable","insert"],"mappings":";;AAAA,IAAMA,QAAQC,QAAQ,OAAR,CAAd;AACA,IAAMC,SAASD,QAAQ,eAAR,CAAf;;AAEA,IAAIE,KAAKH,MAAMG,EAAN,CAAS;AAChB,YAAU,QADM;AAEd,YAAU;AACN,gBAAY;AADN,GAFI;AAKhB,SAAO,aAAUC,GAAV,EAAeC,MAAf,EAAuB;AAC1BC,YAAQC,GAAR,CAAYH,GAAZ;AACAE,YAAQC,GAAR,CAAYF,MAAZ;AACH;AARe,CAAT,CAAT;;AAYA,IAAIG,aAAa,+DAAjB;AACCL,GAAGM,KAAH,CAASD,UAAT,EAAqBE,IAArB,CAA0B,YAAM;AAC7BF;AACD,CAFF,EAEIG,KAFJ,CAEU,UAACC,GAAD,EAAS;AACd,QAAMA,GAAN;AACH,CAJF;;AAMD,IAAMC,cAAc,oDAChB,4DADgB,GAEhB,mFAFgB,GAGhB,sEAHgB,GAIhB,sEAJgB,GAKhB,sEALgB,GAMhB,sEANgB,GAOhB,sEAPgB,GAQhB,sEARgB,GAShB,sEATgB,GAUhB,sEAVgB,GAWhB,sEAXgB,GAYhB,sEAZgB,GAahB,sEAbgB,GAchB,sEAdgB,GAehB,sEAfgB,GAgBhB,sEAhBgB,GAiBhB,sEAjBgB,GAkBhB,sEAlBgB,GAmBhB,sEAnBgB,GAoBhB,sEApBgB,GAqBhB,sEArBgB,GAsBhB,sEAtBgB,GAuBhB,sEAvBgB,GAwBhB,sEAxBgB,GAyBhB,sEAzBgB,GA0BhB,sEA1BgB,GA2BhB,sEA3BgB,GA4BhB,sEA5BgB,GA6BhB,sEA7BgB,GA8BhB,sEA9BgB,GA+BhB,sEA/BgB,GAgChB,sEAhCgB,GAiChB,sEAjCgB,GAkChB,sEAlCgB,GAmChB,sEAnCgB,GAoChB,sEApCgB,GAqChB,sEArCgB,GAsChB,sEAtCgB,GAuChB,sEAvCgB,GAwChB,sEAxCgB,GAyChB,sEAzCgB,GA0ChB,sEA1CgB,GA2ChB,sEA3CgB,GA4ChB,sEA5CgB,GA6ChB,sEA7CgB,GA8ChB,sEA9CgB,GA+ChB,sEA/CgB,GAgDhB,sEAhDgB,GAiDhB,sEAjDgB,GAkDhB,sEAlDgB,GAmDhB,sEAnDgB,GAoDhB,sEApDgB,GAqDhB,sEArDgB,GAsDhB,sEAtDgB,GAuDhB,sEAvDgB,GAwDhB,sEAxDgB,GAyDhB,sEAzDgB,GA0DhB,sEA1DgB,GA2DhB,sEA3DgB,GA4DhB,sEA5DgB,GA6DhB,sEA7DgB,GA8DhB,sEA9DgB,GA+DhB,sEA/DgB,GAgEhB,sEAhEgB,GAiEhB,sEAjEgB,GAkEhB,sEAlEgB,GAmEhB,sEAnEgB,GAoEhB,sEApEgB,GAqEhB,sEArEgB,GAsEhB,sEAtEgB,GAuEhB,sEAvEgB,GAwEhB,sEAxEgB,GAyEhB,sEAzEgB,GA0EhB,sEA1EgB,GA2EhB,sEA3EgB,GA4EhB,kEA5EgB,GA6EhB,kEA7EgB,GA8EhB,kEA9EgB,GA+EhB,kEA/EgB,GAgFhB,qEAhFgB,GAiFhB,IAjFJ;AAkFC;AACA;AACA;AACA;AACA;;AAED,IAAIC,2kGAAJ;AAoKCX,GAAGM,KAAH,CAASK,MAAT,EAAiBJ,IAAjB,CAAsB,YAAM;AACzBI;AACD,CAFF,EAEIH,KAFJ,CAEU,UAACC,GAAD,EAAS;AACd,QAAMA,GAAN;AACH,CAJF","file":"rename.js","sourcesContent":["const sworm = require('sworm');\nconst config = require('./config.json');\n\nvar db = sworm.db({\n  \"driver\": \"sqlite\",\n    \"config\": {\n        \"filename\": \"./db.db\",\n      },\n  \"log\": function (sql, params) {\n      console.log(sql)\n      console.log(params)\n  }\n})\n\n\nlet alterTable = \"ALTER TABLE PROSPECT_PROFILE RENAME TO TEMP_PROSPECT_PROFILE;\"\n db.query(alterTable).then(() => {\n    alterTable\n  }).catch((err) => {\n      throw err\n  })\n\nconst createTable = \"CREATE TABLE if not exists PROSPECT_PROFILE \\n(\" +\n    \"    PROSPECT_ID                      INTEGER   NOT NULL \\n\" +\n    \"                                                     PRIMARY KEY AUTOINCREMENT,\\n\" +\n    \"    CRM_ID                           VARCHAR (30)    DEFAULT NULL,\\n\" +\n    \"    CITIZEN_ID                       VARCHAR (20)    DEFAULT NULL,\\n\" +\n    \"    CID_ISSUE_DATE                   DATE            DEFAULT NULL,\\n\" +\n    \"    CID_EXPIRY_DATE                  DATE            DEFAULT NULL,\\n\" +\n    \"    PASSPORT_NO                      VARCHAR (20)    DEFAULT NULL,\\n\" +\n    \"    PP_ISSUE_DATE                    DATE            DEFAULT NULL,\\n\" +\n    \"    PP_EXPIRY_DATE                   DATE            DEFAULT NULL,\\n\" +\n    \"    TITLE_TH                         VARCHAR (40)    DEFAULT NULL,\\n\" +\n    \"    FIRSTNAME_TH                     VARCHAR (255)   DEFAULT NULL,\\n\" +\n    \"    LASTNAME_TH                      VARCHAR (255)   DEFAULT NULL,\\n\" +\n    \"    TITLE_TH                         VARCHAR (40)    DEFAULT NULL,\\n\" +\n    \"    FIRSTNAME_EN                     VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    LASTNAME_EN                      VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    BIRTH_DATE                       DATE            DEFAULT NULL,\\n\" +\n    \"    REG_ADDR_NMBR                    VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    REG_ADDR_MOO                     VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    REG_ADDR_BUILDING                VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    REG_ADDR_SOI                     VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    REG_ADDR_ROAD                    VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    REG_DISTRICT                     VARCHAR (40)    DEFAULT NULL,\\n\" +\n    \"    REG_SUBDISTRICT                  VARCHAR (40)    DEFAULT NULL,\\n\" +\n    \"    REG_COUNTRY                      VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    REG_PROVINCE                     VARCHAR (20)    DEFAULT NULL,\\n\" +\n    \"    REG_POSTAL_CD                    VARCHAR (11)    DEFAULT NULL,\\n\" +\n    \"    MOBILE_NO                        VARCHAR (18)    DEFAULT NULL,\\n\" +\n    \"    GENDER                           VARCHAR (1)     DEFAULT NULL,\\n\" +\n    \"    MARITAL_STATUS                   VARCHAR (1)     DEFAULT NULL,\\n\" +\n    \"    NATIONALITY                      VARCHAR (30)    DEFAULT NULL,\\n\" +\n    \"    OTHER_NATIONALITY                VARCHAR (30)    DEFAULT NULL,\\n\" +\n    \"    EDUCATION                        VARCHAR (20)    DEFAULT NULL,\\n\" +\n    \"    OCCUPATION                       VARCHAR (20)    DEFAULT NULL,\\n\" +\n    \"    INCOME                           VARCHAR (20)    DEFAULT NULL,\\n\" +\n    \"    COUNTRY_INCOME                   VARCHAR (20)    DEFAULT NULL,\\n\" +\n    \"    SOURCE_INCOME                    VARCHAR (20)    DEFAULT NULL,\\n\" +\n    \"    PURPOSE_FOR_OPEN_ACCOUNT         CHAR (1)        DEFAULT NULL,\\n\" +\n    \"    PERS_PH_NBR                      VARCHAR (18)    DEFAULT NULL,\\n\" +\n    \"    PERS_PH_EXT                      VARCHAR (18)    DEFAULT NULL,\\n\" +\n    \"    OFFICE_PH_NBR                    VARCHAR (18)    DEFAULT NULL,\\n\" +\n    \"    OFFICE_PH_EXT                    VARCHAR (18)    DEFAULT NULL,\\n\" +\n    \"    CON_ADDR_NMBR                    VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    CON_ADDR_MOO                     VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    CON_ADDR_BUILDING                VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    CON_ADDR_SOI                     VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    CON_ADDR_ROAD                    VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    CON_DISTRICT                     VARCHAR (40)    DEFAULT NULL,\\n\" +\n    \"    CON_SUBDISTRICT                  VARCHAR (40)    DEFAULT NULL,\\n\" +\n    \"    CON_COUNTRY                      VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    CON_PROVINCE                     VARCHAR (20)    DEFAULT NULL,\\n\" +\n    \"    CON_POSTAL_CD                    VARCHAR (11)    DEFAULT NULL,\\n\" +\n    \"    COMPANY_NAME                     VARCHAR (256)   DEFAULT NULL,\\n\" +\n    \"    OFF_ADDR_NMBR                    VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    OFF_ADDR_MOO                     VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    OFF_ADDR_BUILDING                VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    OFF_ADDR_SOI                     VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    OFF_ADDR_ROAD                    VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    OFF_DISTRICT                     VARCHAR (40)    DEFAULT NULL,\\n\" +\n    \"    OFF_SUBDISTRICT                  VARCHAR (40)    DEFAULT NULL,\\n\" +\n    \"    OFF_COUNTRY                      VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    OFF_PROVINCE                     VARCHAR (20)    DEFAULT NULL,\\n\" +\n    \"    OFF_POSTAL_CD                    VARCHAR (11)    DEFAULT NULL,\\n\" +\n    \"    FATCA_ANS                        VARCHAR (9)     DEFAULT NULL,\\n\" +\n    \"    LASER_NUMBER                     VARCHAR (12)    DEFAULT NULL,\\n\" +\n    \"    DOPA_FLAG                        TINYINT (4)     DEFAULT NULL,\\n\" +\n    \"    RISKLEVEL                        DECIMAL (10, 0) DEFAULT NULL,\\n\" +\n    \"    RISK_CALCULATION_DATE            DATE            DEFAULT NULL,\\n\" +\n    \"    SWF_STATUS                       VARCHAR (35)    DEFAULT NULL,\\n\" +\n    \"    EMAIL                            VARCHAR (70)    DEFAULT NULL,\\n\" +\n    \"    OCCUPATION_SPECIFY               VARCHAR (50)    DEFAULT NULL,\\n\" +\n    \"    FLOW_STATUS                      VARCHAR (30)    DEFAULT NULL,\\n\" +\n    \"    E_CONSENT_FLAG                   TINYINT (1)     DEFAULT NULL,\\n\" +\n    \"    EKYC_CONSENT_FLAG                TINYINT (1)     DEFAULT NULL,\\n\" +\n    \"    EKYC_CONSENT_DATE                DATE            DEFAULT NULL,\\n\" +\n    \"    CONFIDENCE_SCORE                 DECIMAL (5, 2)  DEFAULT NULL,\\n\" +\n    \"    PROSPECT_STATUS                  VARCHAR (30)    NOT NULL,\\n\" +\n    \"    CREATE_DATE                      TIMESTAMP (6)   NOT NULL,\\n\" +\n    \"    UPDATE_DATE                      TIMESTAMP (6)   NOT NULL,\\n\" +\n    \"    APP_ID                           VARCHAR (2)     NOT NULL,\\n\" +\n    \"    CHANNEL                          VARCHAR (10)    DEFAULT NULL\\n\" +\n    \");\"\n // db.query(createTable).then(() => {\n //    alterTable\n //  }).catch((err) => {\n //      throw err\n //  })\n\nlet insert = `\n  INSERT INTO PROSPECT_PROFILE(\n    PROSPECT_ID,\n    CRM_ID,\n    CITIZEN_ID,\n    CID_ISSUE_DATE,\n    CID_EXPIRY_DATE,\n    PASSPORT_NO,\n    PP_ISSUE_DATE,\n    PP_EXPIRY_DATE,\n    TITLE_TH,\n    FIRSTNAME_TH,\n    LASTNAME_TH,\n    FIRSTNAME_EN,\n    LASTNAME_EN,\n    BIRTH_DATE,\n    REG_ADDR_NMBR,\n    REG_ADDR_MOO,\n    REG_ADDR_BUILDING,\n    REG_ADDR_SOI,\n    REG_ADDR_ROAD,\n    REG_DISTRICT,\n    REG_SUBDISTRICT,\n    REG_COUNTRY,\n    REG_PROVINCE,\n    REG_POSTAL_CD,\n    MOBILE_NO,\n    GENDER,\n    MARITAL_STATUS,\n    NATIONALITY,\n    OTHER_NATIONALITY,\n    EDUCATION,\n    OCCUPATION,\n    INCOME,\n    COUNTRY_INCOME,\n    SOURCE_INCOME,\n    PURPOSE_FOR_OPEN_ACCOUNT,\n    PURPOSE_FOR_OTHER,\n    PERS_PH_NBR,\n    PERS_PH_EXT,\n    OFFICE_PH_NBR,\n    OFFICE_PH_EXT,\n    CON_ADDR_NMBR,\n    CON_ADDR_MOO,\n    CON_ADDR_BUILDING,\n    CON_ADDR_SOI,\n    CON_ADDR_ROAD,\n    CON_DISTRICT,\n    CON_SUBDISTRICT,\n    CON_COUNTRY,\n    CON_PROVINCE,\n    CON_POSTAL_CD,\n    COMPANY_NAME,\n    OFF_ADDR_NMBR,\n    OFF_ADDR_MOO,\n    OFF_ADDR_BUILDING,\n    OFF_ADDR_SOI,\n    OFF_ADDR_ROAD,\n    OFF_DISTRICT,\n    OFF_SUBDISTRICT,\n    OFF_COUNTRY,\n    OFF_PROVINCE,\n    OFF_POSTAL_CD,\n    FATCA_ANS,\n    LASER_NUMBER,\n    DOPA_FLAG,\n    RISKLEVEL,\n    RISK_CALCULATION_DATE,\n    SWF_STATUS,\n    EMAIL,\n    OCCUPATION_SPECIFY,\n    FLOW_STATUS,\n    E_CONSENT_FLAG,\n    EKYC_CONSENT_FLAG,\n    EKYC_CONSENT_DATE,\n    CONFIDENCE_SCORE,\n    PROSPECT_STATUS,\n    CREATE_DATE,\n    UPDATE_DATE,\n    APP_ID,\n    CHANNEL\n  )\n  SELECT\n    PROSPECT_ID,\n    CRM_ID,\n    CITIZEN_ID,\n    CID_ISSUE_DATE,\n    CID_EXPIRY_DATE,\n    PASSPORT_NO,\n    PP_ISSUE_DATE,\n    PP_EXPIRY_DATE,\n    TITLE_TH,\n    FIRSTNAME_TH,\n    LASTNAME_TH,\n    FIRSTNAME_EN,\n    LASTNAME_EN,\n    BIRTH_DATE,\n    REG_ADDR_NMBR,\n    REG_ADDR_MOO,\n    REG_ADDR_BUILDING,\n    REG_ADDR_SOI,\n    REG_ADDR_ROAD,\n    REG_DISTRICT,\n    REG_SUBDISTRICT,\n    REG_COUNTRY,\n    REG_PROVINCE,\n    REG_POSTAL_CD,\n    MOBILE_NO,\n    GENDER,\n    MARITAL_STATUS,\n    NATIONALITY,\n    OTHER_NATIONALITY,\n    EDUCATION,\n    OCCUPATION,\n    INCOME,\n    COUNTRY_INCOME,\n    SOURCE_INCOME,\n    PURPOSE_FOR_SAVING_FLAG,\n    PURPOSE_FOR_OTHER,\n    PERS_PH_NBR,\n    PERS_PH_EXT,\n    OFFICE_PH_NBR,\n    OFFICE_PH_EXT,\n    CON_ADDR_NMBR,\n    CON_ADDR_MOO,\n    CON_ADDR_BUILDING,\n    CON_ADDR_SOI,\n    CON_ADDR_ROAD,\n    CON_DISTRICT,\n    CON_SUBDISTRICT,\n    CON_COUNTRY,\n    CON_PROVINCE,\n    CON_POSTAL_CD,\n    COMPANY_NAME,\n    OFF_ADDR_NMBR,\n    OFF_ADDR_MOO,\n    OFF_ADDR_BUILDING,\n    OFF_ADDR_SOI,\n    OFF_ADDR_ROAD,\n    OFF_DISTRICT,\n    OFF_SUBDISTRICT,\n    OFF_COUNTRY,\n    OFF_PROVINCE,\n    OFF_POSTAL_CD,\n    FATCA_ANS,\n    LASER_NUMBER,\n    DOPA_FLAG,\n    RISKLEVEL,\n    RISK_CALCULATION_DATE,\n    SWF_STATUS,\n    EMAIL,\n    OCCUPATION_SPECIFY,\n    FLOW_STATUS,\n    E_CONSENT_FLAG,\n    EKYC_CONSENT_FLAG,\n    EKYC_CONSENT_DATE,\n    CONFIDENCE_SCORE,\n    PROSPECT_STATUS,\n    CREATE_DATE,\n    UPDATE_DATE,\n    APP_ID,\n    CHANNEL\n  FROM  TEMP_PROSPECT_PROFILE\n`\n db.query(insert).then(() => {\n    insert\n  }).catch((err) => {\n      throw err\n  })\n"]}